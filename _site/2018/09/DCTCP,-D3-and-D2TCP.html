<!DOCTYPE html>
<html lang="en-us">

<head>
  <link href="http://gmpg.org/xfn/11" rel="profile">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta http-equiv="content-type" content="text/html; charset=utf-8">

  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1">

  <link rel="stylesheet" href="/assets/css/normalize.css"/>
  <link rel="stylesheet" href="/assets/css/bulma.css"/>
  <link rel="stylesheet" href="/assets/css/custom.css"/>
  <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/font-awesome/4.7.0/css/font-awesome.min.css">
  <!-- <link href="https://fonts.googleapis.com/css?family=Open+Sans|Roboto" rel="stylesheet"> -->

  <!-- Icons -->
  <link rel="shortcut icon" href="/assets/images/favicon.ico">

  <!-- RSS -->
  <link rel="alternate" type="application/rss+xml" title="RSS" href="/atom.xml">
  <link rel="alternate" type="application/rss+xml" title="RSS" href="/atom.xml">

  <title>
    
      Datacenter TCP, Deadline Driven Delivery and Deadline-aware Datacenter TCP &middot; Columba M71's Blog
    
  </title>

</head>


<body>

<section class="hero is-dark">
  <div class="hero-body">
    <div class="container">
        <h1 class="title">
          <span class="typewrite" data-period="2000" data-type='[ "Columba M71"]'>
            <span class="wrap"></span>
          </span>
        </h1>
      <h4 class="subtitle" id="quote">
      </h4>
    </div>
  </div>
</section>

<div class="main-container">
  <div class="tile is-ancestor is-vertical">


    <nav class="nav has-shadow">

      <div class="nav-left">

        <a href="/" class="nav-item">
          <span class="icon">
            <i class="fa fa-home" aria-hidden="true" title="Homepage"></i>
          </span>
        </a>

        <a href="https://github.com/hnu2013wwj" class="nav-item">
          <span class="icon">
            <i class="fa fa-github" aria-hidden="true" title="Github"></i>
          </span>
        </a>

        <div class="nav-item" id="searchFieldNav">
          <div class="field has-addons">
            <p class="control">
              <input class="input is-small" type="text" placeholder="Find an article" id="search-text">
            </p>
            <p class="control">
              <a class="button is-dark is-small" onclick="searchHandler();">
                Search
              </a>
            </p>
          </div>
        </div>

      </div>

      <div class="nav-right nav-menu" id='nav-menu'>
        <a href="/archive" class="nav-item">Archive</a>
        <a href="/tags" class="nav-item">Tags</a>
      </div>

      <span class="nav-toggle" id="nav-toggle">
          <span></span>
          <span></span>
          <span></span>
    </nav>

    <div class="tile is-parent">
      <div class="tile is-8 is-child main">

        <div class="box">
    <h1 class="post-title">Datacenter TCP, Deadline Driven Delivery and Deadline-aware Datacenter TCP</h1>
    <hr/>
    <div class="content"><span class="post-text"><h2 id="datacenter-tcp-deadline-driven-delivery-and-deadline-aware-datacenter-tcp">Datacenter TCP, Deadline Driven Delivery and Deadline-aware Datacenter TCP</h2>

<h3 id="0x00-å¼•è¨€">0x00 å¼•è¨€</h3>

<p>è¿™ç¯‡æ€»ç»“åŒ…å«äº†3ç¯‡Paperçš„å†…å®¹ï¼Œä¸€ç¯‡æ˜¯SIGCOMM 2010ä¸Šçš„DCTCPï¼Œä¸€ç¯‡æ˜¯SIGCOMM 2011ä¸Šçš„Deadline Driven Deliveryï¼Œè¿˜æœ‰ä¸€ç¯‡æ˜¯SIGCOMM 2012ä¸Šé¢çš„D2TCPã€‚å‰è€…å°†çš„æ˜¯å¦‚ä½•åˆ©ç”¨<strong>Explicit Congestion Notification</strong>Â (<strong>ECN</strong>)è§£å†³æ•°æ®ä¸­å¿ƒç½‘ç»œä¸­TCPçš„ä¸€äº›é—®é¢˜ï¼Œç¬¬äºŒä¸ªæ˜¯å¦‚ä½•åŠ å…¥deadlineçš„ä¼˜åŒ–ï¼Œåè€…æ˜¯å‰2è€…çš„ä¼˜åŒ–ã€‚</p>

<p>è¿™é‡Œåªæ˜¯ç®€å•åœ°ä»‹ç»ã€‚</p>

<h3 id="0x01-ecn">0x01 ECN</h3>

<p>ECNå°±æ˜¯æ˜¾ç¤ºçš„æ‹¥å¡é€šçŸ¥ã€‚å¯¹äºIPv4ï¼Œå®ƒä½¿ç”¨äº†DiffServå­—æ®µæœ€å³è¾¹çš„ä¸¤ä¸ªbitsæ¥æ ‡ç¤º(åœ¨ä¸€äº›æ—©ä¸€ç‚¹çš„ä¹¦ä¸Šï¼Œå¯ä»¥å‘ç°è¯´è¿™é‡Œæ˜¯é¢„ç•™ç»™ä»¥åçš„åŠŸèƒ½çš„ï¼Œç›®å‰æ²¡æœ‰ä½¿ç”¨ï¼Œå½“ç„¶ç°åœ¨æ˜¯å·²ç»ä½¿ç”¨äº†)ï¼Œåœ¨IPv6ä¸ŠTraffic Classå­—æ®µçš„æœ€åä¸¤ä¸ªbitsã€‚</p>

<p><img src="/assets/img/dctcp-header.png" alt="dctcp-header" /></p>

<p>â€‹    è¿™é‡Œåªç»™å‡ºäº†IPv4çš„headerï¼Œå›¾ç‰‡æ¥æºäºç»´åŸºç™¾ç§‘ã€‚</p>

<ul>
  <li><code class="highlighter-rouge">00</code> â€“ ä¸æ”¯æŒECNï¼›</li>
  <li><code class="highlighter-rouge">10</code> â€“ æ”¯æŒECNï¼›</li>
  <li><code class="highlighter-rouge">01</code> â€“ æ”¯æŒECNï¼Œå’Œä¸Šé¢ç›¸åŒï¼›</li>
  <li><code class="highlighter-rouge">11</code> â€“é‡åˆ°äº†é˜»å¡ï¼›</li>
</ul>

<p>ECNè¿˜æœ‰æ›´å¤šçš„ç»†èŠ‚ï¼Œå¯å‚è€ƒç›¸å…³èµ„æ–™ã€‚</p>

<p>.</p>

<h3 id="0x02-é—®é¢˜">0x02 é—®é¢˜</h3>

<ol>
  <li>incast é—®é¢˜ï¼Œåœ¨Partition/Aggregateæ¨¡å¼ä¸­æ¯”è¾ƒå¸¸è§ï¼ŒæœåŠ¡å™¨åŒæ—¶å›å¤è¯·æ±‚ç«¯å¯¼è‡´æŸä¸ªåœ°æ–¹çš„åŒ…çªç„¶å¤§é‡å¢åŠ ï¼Œä»è€Œå¯¼è‡´ä¸¢åŒ…ï¼›</li>
  <li>æ’é˜Ÿé—®é¢˜ï¼Œé•¿æ—¶é—´çš„æµå’ŒçŸ­æ—¶é—´çš„æµåŒæ—¶ä½¿ç”¨ä¸€ä¸ªäº¤æ¢æœºç«¯å£æ—¶ï¼Œå¯¼è‡´æ’é˜Ÿï¼Œä¹Ÿå¯¼è‡´çŸ­æ—¶é—´çš„æ•°æ®è¢«dropï¼ŒåŠæ—¶æ²¡æœ‰è¢«dropé¡µå¯¼è‡´äº†å»¶æ—¶çš„å¢åŠ ï¼›</li>
  <li>bufferçš„é—®é¢˜ï¼Œä¸åŒçš„æµä½¿ç”¨ä¸åŒçš„äº¤æ¢æœºçŸ­ç©ºï¼Œé•¿æ—¶é—´çš„æµå ç”¨äº†å…±äº«çš„bufferã€‚</li>
</ol>

<p><img src="/assets/img/dctcp-problems.png" alt="dctcp-problems" /></p>

<h3 id="0x03-dctcp">0x03 DCTCP</h3>

<p>DCTCPåˆ©ç”¨äº†ECNã€‚åœ¨äº¤æ¢æœºä¸Šï¼Œå½“ä¸€ä¸ªç«¯å£çš„åŒ…è¶…è¿‡ä¸€å®šçš„é˜ˆå€¼ä¹‹åï¼Œç»™åŒ…åŠ ä¸ŠECNæ ‡å¿—ã€‚åŒ…çš„æ¥å—è¿™åœ¨æ¥å—åˆ°è¿™äº›åŒ…ä¹‹åï¼Œå°†è¿™äº›ä¿¡æ¯å›å¤ç»™å‘é€è€…ã€‚å‘é€è€…æ ¹æ®æ”¶åˆ°çš„åŒ…é‡Œé¢çš„ECNçš„æƒ…å†µæ¥è°ƒæ•´å‘é€è¡Œä¸ºã€‚è¿™æ ·å°±å¯ä»¥åœ¨å‘ç”Ÿæ‹¥å¡ä¹‹å‰å°±è°ƒæ•´è¡Œä¸ºã€‚æ€»ç»“ä¸€ä¸‹å°±æ˜¯3ä¸ªéƒ¨åˆ†:</p>

<ol>
  <li>Simple Marking at the Switchï¼›</li>
  <li>ECN-Echo at the Receiverï¼›</li>
  <li>ControllerattheSenderï¼›</li>
</ol>

<p>å‘é€æ–¹è®°å½•æ”¶åˆ°çš„å›å¤åŒ…é‡Œé¢æ¯”ä¾‹ï¼Œä½¿ç”¨è¿™æ ·ä¸€ä¸ªå‡½æ•°æ›´æ–°ï¼š</p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>Î± â† (1 âˆ’ g) Ã— Î± + g Ã— F
</code></pre></div></div>

<p>Fä¸ºæœ€æ–°çª—å£é‡Œé¢è¢«æ ‡è®°çš„ç¬”è®°ï¼Œgæ—¶ä¸€ä¸ª0åˆ°1ä¹‹é—´çš„æ¯”ä¾‹å€¼ï¼Œè¿™ä¸ªå’ŒRTTçš„æ—¶é—´ä¼°è®¡ç±»ä¼¼ã€‚</p>

<p>ç„¶åä½¿ç”¨:</p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>cwnd â† cwnd Ã— (1 âˆ’ Î±/2)
</code></pre></div></div>

<p>æ¥æ›´æ–°cwndã€‚</p>

<p>.</p>

<p>æ•ˆæœçš„éƒ¨åˆ†æ•°æ®:</p>

<p><img src="/assets/img/dctcp-results.png" alt="dctcp-results" /></p>

<h3 id="0x04-deadline-driven-delivery">0x04 Deadline Driven Delivery</h3>

<p>D3çš„å‡ºç°æ—¶ä¸ºäº†è§£å†³DCTCPä¸­çš„deadlineçš„é—®é¢˜ï¼Œä½¿ç”¨çš„æ—¶å¸¦å®½åˆ†é…çš„æ–¹å¼ã€‚æ¯ä¸€ä¸ªRTTå†…ï¼Œå‘é€æ–¹éƒ½è®¡ç®—éœ€è¦åœ¨deadlineä¹‹å‰å‘é€å®Œæ•°æ®çš„å¸¦å®½ï¼Œç„¶åæŠŠè¿™ä¸ªä¿¡æ¯æ”¾è¿›åŒ…é‡Œé¢ã€‚äº¤æ¢æœºåœ¨æ”¶åˆ°äº†è¿™æ ·çš„ä¿¡æ¯ä¹‹åï¼Œä½¿ç”¨è´ªå©ªçš„æ–¹å¼åˆ†é…å¸¦å®½ï¼š</p>

<p>å¯¹äºæœ‰deadlineçš„æµï¼Œå°±åœ¨å¹³å‡å…±äº«çš„å¸¦å®½ä¸ŠåŠ ä¸Šå‘é€æ–¹éœ€è¦çš„å¸¦å®½çš„å€¼ï¼Œæ²¡æœ‰ï¼Œåˆ™å°±é€‰æ‹©å¹³å‡åˆ†é…çš„å¸¦å®½:</p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>â€¢ For a deadline flow with desired rate r, a = (r+fs), where fs is the fair share of the spare capacity after satisfying deadline flow requests.
â€¢ For a non-deadline flow, a = fs.
</code></pre></div></div>

<p>è¿™é‡Œçš„å…·ä½“æ“ä½œè¿˜æœ‰æ›´å¤šçš„ç»†èŠ‚:</p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>The rate allocation description above assumes the router has the rate requests for all flows at the same point in time. In reality, the router needs to make allocation decisions in an online, dynamic setting, i.e., rate requests are spread over time, and flows start and finish. To achieve this, the rate allocation operates in a slotted fashion (from the perspective of the endhosts). 
</code></pre></div></div>

<p>ç»“æœçš„éƒ¨åˆ†æ•°æ®ï¼š</p>

<p><img src="/assets/img/dctcp-d3-results.png" alt="dctcp-d3-results" /></p>

<h3 id="0x05-d2tcp">0x05 D2TCP</h3>

<p>DCTCPä¹Ÿæ˜¯ä¸ºäº†è§£å†³DCTCPä¸­ä¸å¯å€¼çš„deadlineæ—¶é—´æ”¹è¿›çš„ï¼ŒåŒæ—¶è§£å†³D3ç§å­˜åœ¨çš„é—®é¢˜ã€‚å®ƒå¤„ç†è€ƒè™‘åˆ°æ‹¥å¡çš„æƒ…å†µæ€§å¤–ï¼Œè¿˜è€ƒè™‘äº†åŒ…çš„deadlineä¿¡æ¯ï¼Œåˆ°è¾¾äº†ä»¥ä¸‹çš„æ•ˆæœï¼š</p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>â€¢ reduces the fraction of missed deadlines compared to DCTCP and D3 by 75% and 50%, respectively;
â€¢ achieves nearly as high bandwidth as TCP for background flows without degrading OLDI performance;
â€¢ meets3deadlines that are 35-55% tighter than those achieved by D for a reasonable 5% of missed deadlines, giving OLDIs more time for actual computation; and
â€¢ coexists with TCP flows without degrading their performance.
</code></pre></div></div>

<p>D2TCPçš„Congestion Avoidanceç®—æ³•ï¼Œé¦–å…ˆåŒæ ·æ—¶DCTCPä¸­çš„ä¸€ä¸ªå…¬å¼:</p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>Î± = (1 âˆ’ g) Ã— Î± + g Ã— f
</code></pre></div></div>

<p>ç„¶åå®šä¹‰ä¸€ä¸ªå‚æ•°dï¼Œä»£è¡¨äº†deadlineçš„ç´§è¿«ç¨‹åº¦ï¼Œè¿™é‡Œçš„dè¶Šå¤§ä»£è¡¨è¶Šç´§è¿«ï¼Œç„¶åè®¡ç®—ä¸€ä¸ªå‚æ•°p(å°±æ˜¯penaltyçš„æ„æ€)ï¼š</p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>p = a ^ d
</code></pre></div></div>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>This function was originally proposed for color correction in graphics, and was dubbed gamma-correction because the original paper uses Î³ as the exponent. Note that being a fraction, ğ›¼ â‰¤ 1 and therefore, ğ‘ â‰¤ 1. 
</code></pre></div></div>

<p>ç„¶åå°±è®¡ç®—æ–°çš„çª—å£å¤§å°:</p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>w = w * (1 - p/2) if p &gt; 0,
  = w + 1, if p = 0
</code></pre></div></div>

<p>è¿™é‡Œå¯ä»¥çœ‹å‡ºæ¥ï¼Œå¦‚æœæ²¡æœ‰è¢«æ ‡è®°çš„åŒ…ï¼Œa = 0ï¼Œè¿™æ ·på°±æ˜¯0ï¼Œè¡Œä¸ºå’Œæ­£å¸¸TCPçš„è¡Œä¸ºä¸€æ ·ï¼Œå¦‚æœa = 1ï¼Œé‚£ä¹ˆè®¡ç®—å¤„ç†å•Šçš„wå°±æ˜¯æ­£å¸¸æƒ…å†µä¸‹çš„ä¸€åŠã€‚å…·ä½“çš„då¦‚ä½•å¤„ç†å¯å‚åŠ è®ºæ–‡ã€‚</p>

<p>Famma-correctionå‡½æ•°çš„ç¤ºæ„å›¾:</p>

<p><img src="/assets/img/dctcp-correction.png" alt="dctcp-correction" /></p>

<p>å…·ä½“åˆ†æè¿™é‡Œçœç•¥äº†ã€‚ç»“æœçš„éƒ¨åˆ†æ•°æ®:</p>

<p><img src="/assets/img/d2tcp-results.png" alt="d2tcp-results" /></p>

<p>.</p>

<h2 id="å‚è€ƒ">å‚è€ƒ</h2>

<ol>
  <li>Data Center TCP (DCTCP), SIGCOMM 2010.</li>
  <li>Deadline-Aware Datacenter TCP (D2TCP), SIGCOMM 2012.</li>
  <li>Better Never than Late: Meeting Deadlines in Datacenter Networks, SIGCOMM 2011.</li>
  <li>https://en.wikipedia.org/wiki/Explicit_Congestion_Notification, Explicit Congestion NotificationÂ (ECN).</li>
</ol>
</span></div>
</div>


      </div>

      <div class="tile is-4 is-child">
        <div class="tile is-parent is-vertical sidebar">

          <div class="tile is-child widget">

            <div class="card">
              <header class="card-header">
                <p class="card-header-title nice-title">
                  Recent Posts
                </p>
              </header>
              <div class="card-content">
                <div class="content nice-text">
                  <ul>
                  
                  <li><a href="/2018/10/LegoOS.html">
                    LegoOS -- A Disseminated, Distributed OS for Hardware Resource Disaggregation
                  </a></li>
                  
                  <li><a href="/2018/10/Level-Hashing.html">
                    Write-Optimized and High-Performance Hashing Index Scheme for Persistent Memory
                  </a></li>
                  
                  <li><a href="/2018/10/Classical-Papers.html">
                    è®¡ç®—æœºç§‘å­¦ç»å…¸è®ºæ–‡
                  </a></li>
                  
                  </ul>
                </div>
              </div>
            </div>
          </div>

          <div class="tile is-child widget">

            <div class="card">
              <header class="card-header">
                <p class="card-header-title nice-title">
                  Sponsored
                </p>
              </header>
              <div class="card-content">
                <div class="content nice-text">
                  <img src="/assets/images/Dust_Bunny.jpg"/>
                </div>
              </div>
            </div>

          </div>

          <div class="tile is-child widget">
            <div class="card">
              <header class="card-header">
                <p class="card-header-title nice-title">
                  Recommended Websites
                </p>
              </header>
              <!-- <div class="card-content">
                <div class="content nice-text">
                  <ul>
                    <li>
                      <a href="https://xkcd.com">xkcd</a>
                    </li>
                    <li>
                      <a href="http://commitstrip.com">Commit Strip</a>
                    </li>
                    <li>
                      <a href="http://www.smbc-comics.com">SMBC Comics</a>
                    </li>
                    <li>
                      <a href="https://blog.codinghorror.com">Coding Horror</a>
                    </li>
                    <li>
                      <a href="http://waitbutwhy.com">Wait Buy Why</a>
                    </li>
                    <li>
                      <a href="https://simplysoch.wordpress.com/">Simply Soch</a>
                    </li>
                  </ul>
                </div> -->
              </div>
            </div>
          </div>

        </div>

      </div>

    </div>

  </div>
</div>

<footer class="footer">
  <div class="container">
    <div class="content has-text-centered">
      <p>
        Some rights reserved.
      </p>
      <p>
        Made with <i class="fa fa-heart"></i> and <a href="https://github.com/jgthms/bulma">Bulma</a>, <a href="https://jekyllrb.com/">Jekyll</a>. Hosted on <a href="https://github.com/">Github</a>
      </p>
      <p>
        <a class="icon" href="">
          <i class="fa fa-github" title="Github"></i>
        </a>
        <a class="icon" href="">
          <i class="fa fa-linkedin" title="Linkedin"></i>
        </a>
        <a class="icon" href="">
          <i class="fa fa-envelope" title="Email"></i>
        </a>
      </p>
    </div>
  </div>
</footer>

<!-- js -->
<script src="/assets/js/custom.js"></script>
<script src="/assets/js/typewriter.js"></script>
</body>
</html>
